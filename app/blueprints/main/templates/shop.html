{% extends 'base.html' %}
{% block title %}Shop - Sam's Nik Naks{% endblock %}
{% block content %}

<!-- Hero / Filters -->
<section class="relative bg-gradient-to-b from-slate-900 to-slate-800 text-white py-16">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="flex flex-col gap-6 lg:flex-row lg:items-end lg:justify-between">
      <div>
        <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight">Shop</h1>
        <p class="mt-3 text-slate-200 max-w-2xl">Limited drops and small-batch favorites. Filter by category and sort to find your next piece.</p>
      </div>
      <form class="grid gap-3 sm:grid-cols-3 text-slate-900" method="get">
        <select name="category" class="rounded-lg px-3 py-2 bg-white border border-slate-300">
          <option value="">All categories</option>
          {% for c in categories or [] %}
          <option value="{{ c.slug }}" {% if category == c.slug %}selected{% endif %}>{{ c.name }}</option>
          {% endfor %}
        </select>
        <select name="sort" class="rounded-lg px-3 py-2 bg-white border border-slate-300">
          <option value="latest" {% if sort == 'latest' %}selected{% endif %}>Latest</option>
          <option value="price_asc" {% if sort == 'price_asc' %}selected{% endif %}>Price: Low to High</option>
          <option value="price_desc" {% if sort == 'price_desc' %}selected{% endif %}>Price: High to Low</option>
          <option value="rating" {% if sort == 'rating' %}selected{% endif %}>Rating</option>
        </select>
        <button class="rounded-lg bg-brand-600 px-4 py-2 text-white hover:bg-brand-700">Apply</button>
      </form>
    </div>
  </div>
</section>

<!-- Product grid -->
<section class="py-16 bg-white">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    {% if products and products|length > 0 %}
      <div class="grid gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
        {% for p in products %}
        <a href="{{ url_for('main.product', slug=p.slug) }}" class="group rounded-2xl shadow-card overflow-hidden bg-white">
          <div class="aspect-[4/3] bg-slate-100">
            <img src="{{ url_for('static', filename=p.image) }}" alt="{{ p.name }}" class="w-full h-full object-cover group-hover:scale-[1.02] transition-transform">
          </div>
          <div class="p-4">
            <div class="flex items-start justify-between gap-3">
              <h3 class="font-semibold">{{ p.name }}</h3>
              {% if p.price %}<div class="font-semibold">${{ '%.2f'|format(p.price) }}</div>{% endif %}
            </div>
            {% if p.short %}<p class="mt-1 text-sm text-slate-600">{{ p.short }}</p>{% endif %}
            {% if p.badge %}
              <span class="mt-3 inline-block text-xs font-medium rounded-full px-2 py-1 bg-brand-100 text-brand-700">{{ p.badge }}</span>
            {% endif %}
          </div>
        </a>
        {% endfor %}
      </div>

      {% if pagination %}
      <div class="mt-12 flex items-center justify-center gap-2">
        <a href="{{ pagination.prev_url }}" class="px-3 py-2 rounded-lg border border-slate-300 hover:bg-slate-50 {% if not pagination.has_prev %}pointer-events-none opacity-50{% endif %}">Prev</a>
        <div class="text-sm text-slate-600">Page {{ pagination.page }} of {{ pagination.pages }}</div>
        <a href="{{ pagination.next_url }}" class="px-3 py-2 rounded-lg border border-slate-300 hover:bg-slate-50 {% if not pagination.has_next %}pointer-events-none opacity-50{% endif %}">Next</a>
      </div>
      {% endif %}

    {% else %}
      <div class="text-center py-24">
        <h3 class="text-2xl font-semibold">No products found</h3>
        <p class="mt-2 text-slate-600">Try a different category or check back on the next drop.</p>
      </div>
    {% endif %}
  </div>
</section>

<!-- SEO copy -->
<section class="py-12 bg-slate-50">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <p class="text-slate-600">Discover limited-run resin trays, earrings, ashtrays, and more. Each piece is crafted in small batches with careful pours and polish, so once they’re gone, they’re gone.</p>
  </div>
</section>

{% endblock %}
